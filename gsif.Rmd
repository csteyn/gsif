---
title: "New developments in r-spatial"
author: "Edzer Pebesma"
date: "May 11, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
knitr::opts_chunk$set(echo = TRUE)
```

View these [slides](https://htmlpreview.github.io/?https://github.com/edzer/gsif/blob/master/gsif.html) or their [source](https://github.com/edzer/gsif)

## New developments in or around R

* tidyverse
* github
* blogs, twitter, [reprex](https://github.com/jennybc/reprex)
* data science

## r-spatial

* http://r-spatial.org/ not to be confused with
* http://rspatial.org/
* http://github.com/r-spatial
* sf succeeding sp, sf-verse succeeding sp-verse.
* calls for follow up on raster: [velox](https://github.com/hunzikp/velox), [fasterize](https://github.com/ecohealthalliance/fasterize), [tidy raster](https://github.com/ropensci/unconf17/issues/54), [stars](https://github.com/edzer/stars/blob/master/PROPOSAL.md)

## sf

Simple features are a standard for feature (mainly points, lines, polygons) data. The standard

* includes 17 geometry types,
* dominant are: `POINT`, `MULTIPOINT`, `LINESTRING`, `MULTILINESTRING`, `POLYGON`, `MULTIPOLYGON`, `GEOMETRYCOLLECTION`
* defines points in 2D, 3D, possibly with an `M` (measured) coordinate
* assumes simple (linear) interpolation between points
* has polygons as a single outer ring followed by zero or more inner rings (holes)
* has a text encoding (WKT), such as `LINESTRING(0 0,0 1,1 1)`
* has a binary encoding (WKB), used for I/O to libraries and storage in database blobs

## anything wrong with `sp`?

* it implement no simple features, but rather what was around in 2003 (shapefiles)
* roundtripping simple features potentially leads to data loss
* its definition of polygon holes is somewhat ambiguous
* 

Package `sf`:

```{r}
library(sf)
```
implements simple features in three levels: as single geometries:
```{r}
(p1 = st_point(c(0,1)))
(p2 = st_point(c(2,3)))
(l = st_linestring(rbind(c(0,0), c(0,1), c(1,1))))
str(p1)
str(l)
```
as set of simple features _geometries_:
```{r}
(p = st_sfc(p1, p2, crs = 4326))
```
as simple features: objects with geometry
```{r}
st_sf(soil_type = c("podzol", "fluvisol"), elevation = c(55, 12), geom = p)
```